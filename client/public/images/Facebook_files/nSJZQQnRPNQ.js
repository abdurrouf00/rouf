;/*FB_PKG_DELIM*/

__d("MWMessageSearchFooter.react",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3);a=a.children;var c;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(c={className:"x6s0dn4 x976wh6 x1ey2m1c x78zum5 xdt5ytf xz9dl7a xsag5q8 xf7dkkf xv54qhq x7wzq59"},b[0]=c):c=b[0];b[1]!==a?(c=i.jsx("div",babelHelpers["extends"]({},c,{children:a})),b[1]=a,b[2]=c):c=b[2];return c}g["default"]=a}),98);
__d("MWMessageSearchStatusTextItem.react",["MWMessageSearchFooter.react","MWXText.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(7),e=a.children;a=a.height;a=a===void 0?"short":a;var f;b[0]!==a?(f={0:{},1:{className:"x1cnzs8 xx6bls6"}}[!!(a==="tall")<<0],b[0]=a,b[1]=f):f=b[1];b[2]!==e?(a=i.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:e}),b[2]=e,b[3]=a):a=b[3];b[4]!==f||b[5]!==a?(e=i.jsx(c("MWMessageSearchFooter.react"),{children:i.jsx("div",babelHelpers["extends"]({},f,{children:a}))}),b[4]=f,b[5]=a,b[6]=e):e=b[6];return e}g["default"]=a}),98);
__d("MWMessageSearchEBRestoreStatusOrUpsell.react",["fbt","CometErrorBoundary.react","CometPlaceholder.react","MWEBEntrypointsKillswitch.enum","MWMessageSearchFooter.react","MWMessageSearchStatusTextItem.react","MWMessageSearchStatusTypes","deferredLoadComponent","react","react-compiler-runtime","requireDeferred","useMWEBBackupState","useMWEBGetUpsellState"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useEffect,l=c("deferredLoadComponent")(c("requireDeferred")("MWInboxMessageSearchEBRestoreUpsell.react").__setRef("MWMessageSearchEBRestoreStatusOrUpsell.react"));function m(a){var b=d("react-compiler-runtime").c(9),e=a.onEBOnboarded;a=a.status;var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f={entrypoint:c("MWEBEntrypointsKillswitch.enum").IN_THREAD_SEARCH},b[0]=f):f=b[0];var g=c("useMWEBBackupState")(f);f=c("useMWEBGetUpsellState")();f=f.isRestoreUpsellsDismissed;var i,m;b[1]!==g||b[2]!==e?(i=function(){g===3&&e()},m=[g,e],b[1]=g,b[2]=e,b[3]=i,b[4]=m):(i=b[3],m=b[4]);k(i,m);if(a.overallSearchStatus===d("MWMessageSearchStatusTypes").OverallStatus.COMPLETE&&g===4&&!f){b[5]===Symbol["for"]("react.memo_cache_sentinel")?(i=j.jsx(c("CometPlaceholder.react"),{fallback:null,children:j.jsx(c("MWMessageSearchFooter.react"),{children:j.jsx(l,{})})}),b[5]=i):i=b[5];return i}if(a.overallSearchStatus===d("MWMessageSearchStatusTypes").OverallStatus.COMPLETE&&g===2){b[6]===Symbol["for"]("react.memo_cache_sentinel")?(m=j.jsx(c("MWMessageSearchStatusTextItem.react"),{children:h._(/*BTDS*/"If you can't find the message you're looking for, try searching the Messenger mobile app.")}),b[6]=m):m=b[6];return m}if(a.overallSearchStatus===d("MWMessageSearchStatusTypes").OverallStatus.IN_PROGRESS&&!a.hasSomeResults){b[7]===Symbol["for"]("react.memo_cache_sentinel")?(f=j.jsx(c("MWMessageSearchStatusTextItem.react"),{height:"tall",children:h._(/*BTDS*/"Searching for messages...")}),b[7]=f):f=b[7];return f}if(a.overallSearchStatus===d("MWMessageSearchStatusTypes").OverallStatus.IN_PROGRESS&&a.restoreStatus===d("MWMessageSearchStatusTypes").RestoreStatus.IN_PROGRESS){b[8]===Symbol["for"]("react.memo_cache_sentinel")?(i=j.jsx(c("MWMessageSearchStatusTextItem.react"),{children:h._(/*BTDS*/"Restoring chat history. Keep the browser open until restoring is complete.")}),b[8]=i):i=b[8];return i}return null}function a(a){var b=d("react-compiler-runtime").c(3),e=a.onEBOnboarded;a=a.status;var f;b[0]!==e||b[1]!==a?(f=j.jsx(c("CometErrorBoundary.react"),{fallback:n,children:j.jsx(m,{onEBOnboarded:e,status:a})}),b[0]=e,b[1]=a,b[2]=f):f=b[2];return f}function n(){return null}g["default"]=a}),226);
__d("MWMessageSearchInput.react",["fbt","CometComponentWithKeyCommands.react","CometKeys","FocusRegion.react","MWMessageSearchStatusTypes","MWPConversationSearchLogger","MWXCircleButton.react","MWXIconCross","MWXIconMagnifyingGlass","MWXIconStrict.react","MWXRoundedTextInput.react","MWXRow.react","MWXRowItem.react","MWXSpinner.react","MWXTextImpl.react","focusScopeQueries","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={textInput:{textOverflow:"xlyipyv",$$css:!0}};function l(a){return a>99?h._(/*BTDS*/"99+ results"):h._(/*BTDS*/"_j{\"*\":\"{totalResults} results\",\"_1\":\"1 result\"}",[h._plural(a,"totalResults")])}function a(a){var b=d("react-compiler-runtime").c(35),e=a.onEscape,f=a.query,g=a.resultCount,i=a.search,m=a.setQuery;a=a.status;var n;b[0]!==a.overallSearchStatus?(n=a.overallSearchStatus===d("MWMessageSearchStatusTypes").OverallStatus.IN_PROGRESS?j.jsx(c("MWXSpinner.react"),{color:"blue",size:16}):null,b[0]=a.overallSearchStatus,b[1]=n):n=b[1];n=n;var o;b[2]!==g||b[3]!==a.overallSearchStatus?(o=g!=null&&g>0&&a.overallSearchStatus===d("MWMessageSearchStatusTypes").OverallStatus.COMPLETE?l(g):null,b[2]=g,b[3]=a.overallSearchStatus,b[4]=o):o=b[4];g=o;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(a={key:c("CometKeys").ENTER},o=h._(/*BTDS*/"Search"),b[5]=a,b[6]=o):(a=b[5],o=b[6]);b[7]!==f||b[8]!==i?(a={command:a,description:o,handler:function(){f!==""&&(c("MWPConversationSearchLogger").logMessageSearchSearchClicked(),i())},triggerFromInputs:!0,triggerOnRepeats:!1},b[7]=f,b[8]=i,b[9]=a):a=b[9];var p;b[10]===Symbol["for"]("react.memo_cache_sentinel")?(o={key:c("CometKeys").ESCAPE},p=h._(/*BTDS*/"Back"),b[10]=o,b[11]=p):(o=b[10],p=b[11]);b[12]!==e?(o={command:o,description:p,handler:e,triggerFromInputs:!0},b[12]=e,b[13]=o):o=b[13];b[14]!==a||b[15]!==o?(p=[a,o],b[14]=a,b[15]=o,b[16]=p):p=b[16];e=p;b[17]===Symbol["for"]("react.memo_cache_sentinel")?(a={className:"x78zum5"},b[17]=a):a=b[17];b[18]!==n||b[19]!==f||b[20]!==g||b[21]!==m?(o=f!==""?j.jsxs(j.Fragment,{children:[j.jsxs("div",babelHelpers["extends"]({className:"x12bfo1c x4ii5y1 xr1yuqi x135b78x x11lfxj5 xp4054r xuxw1ft"},{children:[n,g!=null&&j.jsx(c("MWXTextImpl.react"),{testid:void 0,type:"meta3",children:g})]})),j.jsx(c("MWXCircleButton.react"),{color:"primary",icon:c("MWXIconCross"),label:h._(/*BTDS*/"Clear"),onPress:function(){return m("")},size:32})]}):null,b[18]=n,b[19]=f,b[20]=g,b[21]=m,b[22]=o):o=b[22];b[23]===Symbol["for"]("react.memo_cache_sentinel")?(p=j.jsx(c("MWXIconStrict.react"),{color:"secondary",icon:c("MWXIconMagnifyingGlass"),size:20}),n=h._(/*BTDS*/"Search"),b[23]=p,b[24]=n):(p=b[23],n=b[24]);b[25]!==m?(g=function(a){a.target instanceof HTMLInputElement&&m(a.target.value)},b[25]=m,b[26]=g):g=b[26];var q;b[27]===Symbol["for"]("react.memo_cache_sentinel")?(q=h._(/*BTDS*/"Search in conversation"),b[27]=q):q=b[27];b[28]!==f||b[29]!==o||b[30]!==g?(p=j.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").tabbableScopeQuery,children:j.jsx(c("MWXRoundedTextInput.react"),{addOnEnd:o,icon:p,label:n,onChange:g,placeholder:q,value:f,xstyle:k.textInput})}),b[28]=f,b[29]=o,b[30]=g,b[31]=p):p=b[31];b[32]!==e||b[33]!==p?(n=j.jsx("div",babelHelpers["extends"]({},a,{children:j.jsx(c("MWXRow.react"),{expanding:!0,paddingTop:12,paddingVertical:8,verticalAlign:"center",children:j.jsx(c("MWXRowItem.react"),{expanding:!0,children:j.jsx(c("CometComponentWithKeyCommands.react"),{commandConfigs:e,children:p})})})})),b[32]=e,b[33]=p,b[34]=n):n=b[34];return n}g["default"]=a}),226);
__d("MWMessageSearchNullState.react",["fbt","MWMessageSearchStatusTextItem.react","MWMessageSearchStatusTypes","MWXColumn.react","MWXColumnItem.react","MWXText.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(11),e=a.isSecureThread,f=a.query,g=a.queryInput,i=a.searchResults;a=a.status;var k;b[0]!==f||b[1]!==g.length||b[2]!==a.overallSearchStatus?(k=g.length>0&&f==null&&a.overallSearchStatus===d("MWMessageSearchStatusTypes").OverallStatus.NOT_STARTED?j.jsx(c("MWMessageSearchStatusTextItem.react"),{height:"tall",children:h._(/*BTDS*/"Press \"Enter\" to search.")}):null,b[0]=f,b[1]=g.length,b[2]=a.overallSearchStatus,b[3]=k):k=b[3];b[4]!==e||b[5]!==i||b[6]!==a.overallSearchStatus?(f=a.overallSearchStatus===d("MWMessageSearchStatusTypes").OverallStatus.COMPLETE&&i.length===0&&j.jsx("div",babelHelpers["extends"]({className:"x1p5oq8j xwxc41k x1mfogq2 xsfy40s"},{children:j.jsxs(c("MWXColumn.react"),{spacing:12,children:[j.jsx(c("MWXColumnItem.react"),{align:"center",paddingVertical:12,children:j.jsx(c("MWXText.react"),{type:"headlineEmphasized4",children:h._(/*BTDS*/"No results found")})}),!e&&j.jsx(c("MWXColumnItem.react"),{align:"center",children:j.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:h._(/*BTDS*/"Try again with a different spelling or combination of terms. Complete words usually work best.")})})]})})),b[4]=e,b[5]=i,b[6]=a.overallSearchStatus,b[7]=f):f=b[7];b[8]!==k||b[9]!==f?(g=j.jsxs(j.Fragment,{children:[k,f]}),b[8]=k,b[9]=f,b[10]=g):g=b[10];return g}g["default"]=a}),226);
__d("MWInboxMessageSearchContext.react",["emptyFunction","react","react-compiler-runtime","useMWPConversationSearch"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;f=e.createContext;var j=e.useContext,k=f({hasMore:void 0,loadMore:c("emptyFunction"),navigateToResult:c("emptyFunction"),next:c("emptyFunction"),previous:c("emptyFunction"),query:void 0,resultCount:void 0,searchResults:[],selectedSearchResultIndex:void 0,status:void 0});function a(a){var b=d("react-compiler-runtime").c(3),e=a.children;a=a.thread;a=c("useMWPConversationSearch")(a.threadKey);var f;b[0]!==e||b[1]!==a?(f=i.jsx(k.Provider,{value:a,children:e}),b[0]=e,b[1]=a,b[2]=f):f=b[2];return f}function b(){return j(k)}g.MWInboxMessageSearchContext=a;g.useMWInboxMessageSearchContext=b}),98);
__d("MWMessageSearchResultItem.react",["BaseMiddot.react","FDSImageCover.react","FDSRelativeTimestamp.react","I64","MWInboxInfoPanelContext.react","MWInboxMessageSearchContext.react","MWInboxMessageSearchJumpToResultQPL","MWMessageSearchMessageSnippet.react","MWPConversationSearchLogger","MWPVisibleMessageContext.react","MWResponsiveLayoutConstants","MWResponsiveLayoutContext.react","MWVerticalRhythm","MWXListCellPressable.react","MWXText.react","MWXTextImpl.react","cr:3702","react","react-compiler-runtime","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react")),k=h.useContext;function a(a){var e=d("react-compiler-runtime").c(42),f=a.item,g=a.onSelect,h=a.position;a=d("MWInboxMessageSearchContext.react").useMWInboxMessageSearchContext();var l=a.navigateToResult;a=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext();a=a.visibleMessage;var m=k(c("MWResponsiveLayoutContext.react")),n=d("MWInboxInfoPanelContext.react").useMWInboxInfoPanelContext(),o=n.setThreadInfoVisible;e[0]!==f?(n={onImpressionStart:function(){c("MWPConversationSearchLogger").logMessageSearchMsgImpression(f)}},e[0]=f,e[1]=n):n=e[1];n=c("useSinglePartialViewImpression")(n);var p=(a==null?void 0:a.messageId)!=null&&(a==null?void 0:a.messageId)===f.messageId||(a==null?void 0:a.messageOtid)!=null&&a.messageOtid===f.messageOtid;a=(a=f.profilePicUrl)!=null?a:f.secondaryProfilePicUrl;var q;e[2]===Symbol["for"]("react.memo_cache_sentinel")?(q={borderRadius:"50%",height:32,width:32},e[2]=q):q=e[2];e[3]!==a?(q=j.jsx(c("FDSImageCover.react"),{alt:"",src:a,style:q}),e[3]=a,e[4]=q):q=e[4];a=q;e[5]===Symbol["for"]("react.memo_cache_sentinel")?(q={className:"x1xegmmw x13fj5qh"},e[5]=q):q=e[5];var r;e[6]===Symbol["for"]("react.memo_cache_sentinel")?(r={className:"xwib8y2 x1y1aw1k"},e[6]=r):r=e[6];var s;e[7]!==f.displayName?(s=j.jsx(c("MWXText.react"),{align:"start",color:"primary",numberOfLines:1,type:"headline4",children:f.displayName}),e[7]=f.displayName,e[8]=s):s=e[8];var t,u;e[9]===Symbol["for"]("react.memo_cache_sentinel")?(t=j.jsx(c("MWVerticalRhythm"),{height:12}),u={className:"x6s0dn4 x78zum5 xeuugli"},e[9]=t,e[10]=u):(t=e[9],u=e[10]);var v;e[11]!==f?(v=j.jsx(c("MWXTextImpl.react"),{color:"secondary",numberOfLines:1,type:"body4",children:j.jsx(c("MWMessageSearchMessageSnippet.react"),{item:f})}),e[11]=f,e[12]=v):v=e[12];var w;e[13]===Symbol["for"]("react.memo_cache_sentinel")?(w={className:"x6s0dn4 x78zum5 xf159sx x135b78x xuxw1ft"},e[13]=w):w=e[13];var x,y;e[14]===Symbol["for"]("react.memo_cache_sentinel")?(x=j.jsx(c("MWXTextImpl.react"),{color:"secondary",numberOfLines:1,type:"body4",children:j.jsx(c("BaseMiddot.react"),{})}),y={className:"xyiysdx"},e[14]=x,e[15]=y):(x=e[14],y=e[15]);var z;e[16]!==f.messageTimestampMs?(z=new Date(f.messageTimestampMs!=null?(i||(i=d("I64"))).to_float(f.messageTimestampMs):0),e[16]=f.messageTimestampMs,e[17]=z):z=e[17];e[18]!==z?(w=j.jsxs("div",babelHelpers["extends"]({},w,{children:[x,j.jsx("div",babelHelpers["extends"]({},y,{children:j.jsx(c("MWXTextImpl.react"),{color:"secondary",type:"body4",children:j.jsx(c("FDSRelativeTimestamp.react"),{date:z,format:"minimized"})})}))]})),e[18]=z,e[19]=w):w=e[19];e[20]!==v||e[21]!==w?(x=j.jsxs("div",babelHelpers["extends"]({},u,{children:[v,w]})),e[20]=v,e[21]=w,e[22]=x):x=e[22];e[23]!==x||e[24]!==s?(y=j.jsxs("div",babelHelpers["extends"]({},r,{children:[s,t,x]})),e[23]=x,e[24]=s,e[25]=y):y=e[25];e[26]!==f||e[27]!==m||e[28]!==l||e[29]!==g||e[30]!==h||e[31]!==p||e[32]!==o?(z=function(a){(b("cr:3702")==null?void 0:b("cr:3702").getCardShowState(d("MWResponsiveLayoutConstants").MWLayoutPanel.MESSAGE_LIST_PANEL,m))==="hidden"&&(m.pushCard(d("MWResponsiveLayoutConstants").MWLayoutPanel.MESSAGE_LIST_PANEL),o(!1)),!p&&(f.messageId!==null||f.messageOtid!==null)&&(d("MWInboxMessageSearchJumpToResultQPL").endCancelIfAny("user_selected_new_result"),d("MWInboxMessageSearchJumpToResultQPL").start(f.threadKey,{messageId:f.messageId,offlineThreadingId:f.messageOtid})),l(f),c("MWPConversationSearchLogger").logMessageSearchMsgResultChosen(null,h,f),g==null||g()},e[26]=f,e[27]=m,e[28]=l,e[29]=g,e[30]=h,e[31]=p,e[32]=o,e[33]=z):z=e[33];e[34]!==a||e[35]!==p||e[36]!==y||e[37]!==z?(u=j.jsx(c("MWXListCellPressable.react"),{addOnStart:a,content:y,onPress:z,selected:p,size:"large",testid:void 0}),e[34]=a,e[35]=p,e[36]=y,e[37]=z,e[38]=u):u=e[38];e[39]!==n||e[40]!==u?(v=j.jsx("div",babelHelpers["extends"]({},q,{ref:n,children:u})),e[39]=n,e[40]=u,e[41]=v):v=e[41];return v}g["default"]=a}),98);
__d("MWMessageSearchResults.react",["CometInfiniteScrollTrigger.react","MWInboxMessageSearchContext.react","MWInboxMessageSearchJumpToResultQPL","MWMessageSearchResultItem.react","MWMessageSearchStatusTypes","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect;b.useMemo;function a(a){var b=d("react-compiler-runtime").c(16),e=a.onSelect;a=a.status;var f=d("MWInboxMessageSearchContext.react").useMWInboxMessageSearchContext(),g=f.hasMore,h=f.loadMore;f=f.searchResults;a=a.searchStatus===d("MWMessageSearchStatusTypes").PrimarySearchStatus.IN_PROGRESS;if(b[0]!==e||b[1]!==f){var l;b[3]!==e?(l=function(a,b){var d;return i.jsx(c("MWMessageSearchResultItem.react"),{item:a,onSelect:e,position:b},(d=(d=a.messageId)!=null?d:a.messageOtid)!=null?d:b)},b[3]=e,b[4]=l):l=b[4];l=f.map(l);b[0]=e;b[1]=f;b[2]=l}else l=b[2];f=l;l=f;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(f=[],b[5]=f):f=b[5];j(k,f);b[6]!==l?(f=i.jsx("div",{"data-testid":void 0,children:l}),b[6]=l,b[7]=f):f=b[7];l=g!=null?g:!1;b[8]===Symbol["for"]("react.memo_cache_sentinel")?(g=i.jsx("div",{className:"xjm9jq1"}),b[8]=g):g=b[8];b[9]!==a||b[10]!==h||b[11]!==l?(g=i.jsx(c("CometInfiniteScrollTrigger.react"),{hasMore:l,isLoading:a,onLoadMore:h,children:g}),b[9]=a,b[10]=h,b[11]=l,b[12]=g):g=b[12];b[13]!==f||b[14]!==g?(a=i.jsxs(i.Fragment,{children:[f,g]}),b[13]=f,b[14]=g,b[15]=a):a=b[15];return a}function k(){return l}function l(){d("MWInboxMessageSearchJumpToResultQPL").endCancelIfAny("user_navigated_away_from_thread")}g["default"]=a}),98);
__d("useClearChatTabMessageSearch",["LSIntEnum","LSMessageSearchType","MAWThreadCutover","MWPConversationSearchContext.react","ReQL","nullthrows","promiseDone","react","react-compiler-runtime","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");b.useCallback;var j=b.useContext,k=(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE);function l(a,b,e,g){c("promiseDone")(a,function(a){return a.runInTransaction(async function(c){var f=await Promise.all([d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.message_search_results).getKeyRange(k,g,b)),e!=null?d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(c.message_search_results).getKeyRange(k,g,e)):Promise.resolve([])]),h=f[0];f=f[1];h=[].concat(h,f);await Promise.all(h.map(function(a){return c.message_search_results.delete(k,a.query,a.threadKey,a.globalIndex)}));await c.message_search_queries.delete(k,g,b);e!=null&&await c.message_search_queries.delete(k,g,e)},"readwrite",void 0,void 0,f.id+":37")})}function a(a){var b=d("react-compiler-runtime").c(7),e=c("useAsyncReStore")(),f=d("MAWThreadCutover").useCutoverOpenThread(a),g=j(d("MWPConversationSearchContext.react").context),h;b[0]!==g?(h=c("nullthrows")(g),b[0]=g,b[1]=h):h=b[1];g=h;var i=g.setSearch;b[2]!==e||b[3]!==(f==null?void 0:f.threadKey)||b[4]!==i||b[5]!==a?(h=function(b){i(),l(e,a,f==null?void 0:f.threadKey,b)},b[2]=e,b[3]=f==null?void 0:f.threadKey,b[4]=i,b[5]=a,b[6]=h):h=b[6];return h}g.default=a}),98);
__d("useMWInboxMessageSearchRestoreLoopLoadedUntilDate",["MAWBridgeSendAndReceive","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useState;function a(a,b){var c=d("react-compiler-runtime").c(4),e=j(null),f=e[0],g=e[1],h;c[0]!==b||c[1]!==a?(e=function(){g(null);var c=window.setInterval(async function(){var e=a==null?null:b==="media"?await d("MAWBridgeSendAndReceive").sendAndReceive("backend","getMediaRestoreNextTimestamp",{threadId:a},{isLoggingDisabled:!0}):await d("MAWBridgeSendAndReceive").sendAndReceive("backend","searchGetFTSNextTimestamp",{threadId:a},{isLoggingDisabled:!0});e=e!=null?parseInt(e,10):-1;g(e);e===0&&window.clearInterval(c)},300);return function(){window.clearInterval(c)}},h=[b,a],c[0]=b,c[1]=a,c[2]=e,c[3]=h):(e=c[2],h=c[3]);i(e,h);return f}g.default=a}),98);
__d("useMWInboxMessageSearchRestoreLoopAndStatus",["I64","Int64Hooks","LSIntEnum","LSMessagingThreadTypeUtil","LSSearchRequestStatusType","MAWMiActOnActThreadReadyDeferred","MWInboxMessageSearchContext.react","MWLSThreadDisplayContext","MWMessageSearchStatusTypes","promiseDone","react","react-compiler-runtime","requireDeferred","useAsyncReStore","useMWInboxMessageSearchRestoreLoopLoadedUntilDate","useMWPConversatioSearchQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=h||d("react");b.useCallback;var k=b.useEffect,l=b.useState,m=c("requireDeferred")("MAWFTSRestoreSync").__setRef("useMWInboxMessageSearchRestoreLoopAndStatus");function n(a){if(a==null)return d("MWMessageSearchStatusTypes").PrimarySearchStatus.NOT_STARTED;if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").PENDING)))return d("MWMessageSearchStatusTypes").PrimarySearchStatus.IN_PROGRESS;if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").COMPLETE)))return d("MWMessageSearchStatusTypes").PrimarySearchStatus.COMPLETE;return(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").FAILED))?d("MWMessageSearchStatusTypes").PrimarySearchStatus.FAILED:d("MWMessageSearchStatusTypes").PrimarySearchStatus.NOT_STARTED}function a(a,b){var e=d("react-compiler-runtime").c(28),f=a.threadKey,g;e[0]!==a.threadType?(g=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType),e[0]=a.threadType,e[1]=g):g=e[1];var h=g,i=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();e[2]!==b?(a=b!=null?b:{},e[2]=b,e[3]=a):a=e[3];g=a;var j=g.shouldResetBeforeLoopStart;b=d("MWInboxMessageSearchContext.react").useMWInboxMessageSearchContext();var o=b.resultCount;a=b.searchResults;g=b.status;var p=a.length>0;e[4]!==g?(b=n(g),e[4]=g,e[5]=b):b=e[5];var q=b,r=c("useAsyncReStore")();a=l(null);g=a[0];var s=a[1];b=l(null);var t=b[0],u=b[1];a=c("useMWPConversatioSearchQPLLogger")();var v=a.qplSuccess,w=a.updateCurrentResultCount;e[6]!==r||e[7]!==i||e[8]!==h||e[9]!==j||e[10]!==f?(b=function(){var a=async function(){var a=await r;c("promiseDone")(c("MAWMiActOnActThreadReadyDeferred")(a,f,"MWInboxMessageSearchPanel.react",function(a,b){m.onReady(function(a){var d=a.getFTSRestoreSync;d().setActiveThreadId(b,i!=="ChatTab");a=j===!0?d().resetRestoreStatus():Promise.resolve();c("promiseDone")(a,function(){return d().startSyncingLoop()});u(d())});s(b);return Promise.resolve()}))};if(!h)return;c("promiseDone")(a())},a=[r,h,f,j,i],e[6]=r,e[7]=i,e[8]=h,e[9]=j,e[10]=f,e[11]=b,e[12]=a):(b=e[11],a=e[12]);d("Int64Hooks").useEffectInt64(b,a);e[13]!==t?(b=function(){t!=null&&(t.resetEBAvailability(),t.isStarted()||c("promiseDone")(t.startSyncingLoop()))},e[13]=t,e[14]=b):b=e[14];var x=b;a=c("useMWInboxMessageSearchRestoreLoopLoadedUntilDate")(g);bb0:{if(!h){b=d("MWMessageSearchStatusTypes").RestoreStatus.NOT_REQUIRED;break bb0}if(t==null||!(t!=null&&t.isStarted())||a==null){b=d("MWMessageSearchStatusTypes").RestoreStatus.NOT_RUNNING;break bb0}if(a===0){b=d("MWMessageSearchStatusTypes").RestoreStatus.COMPLETE;break bb0}b=d("MWMessageSearchStatusTypes").RestoreStatus.IN_PROGRESS}var y=b;bb1:{if(q===d("MWMessageSearchStatusTypes").PrimarySearchStatus.NOT_STARTED){g=d("MWMessageSearchStatusTypes").OverallStatus.NOT_STARTED;break bb1}if(y===d("MWMessageSearchStatusTypes").RestoreStatus.IN_PROGRESS){g=d("MWMessageSearchStatusTypes").OverallStatus.IN_PROGRESS;break bb1}if(q===d("MWMessageSearchStatusTypes").PrimarySearchStatus.IN_PROGRESS){g=d("MWMessageSearchStatusTypes").OverallStatus.IN_PROGRESS;break bb1}g=d("MWMessageSearchStatusTypes").OverallStatus.COMPLETE}var z=g;e[15]!==z||e[16]!==v||e[17]!==o||e[18]!==w?(a=function(){z===d("MWMessageSearchStatusTypes").OverallStatus.COMPLETE&&(o!=null&&w(o),v())},b=[z,v,o,w],e[15]=z,e[16]=v,e[17]=o,e[18]=w,e[19]=a,e[20]=b):(a=e[19],b=e[20]);k(a,b);e[21]!==p||e[22]!==x||e[23]!==z||e[24]!==y||e[25]!==q?(g=function(){return{onEBOnboarded:x,status:{hasSomeResults:p,overallSearchStatus:z,restoreStatus:y,searchStatus:q}}},a=[x,z,y,p,q],e[21]=p,e[22]=x,e[23]=z,e[24]=y,e[25]=q,e[26]=g,e[27]=a):(g=e[26],a=e[27]);return d("Int64Hooks").useMemoInt64(g,a)}g.default=a}),98);
__d("MWChatTabMessageSearchPage.react",["fbt","CometScrollView.react","LSMessagingThreadTypeUtil","Locale","MWMessageSearchEBRestoreStatusOrUpsell.react","MWMessageSearchInput.react","MWMessageSearchNullState.react","MWMessageSearchResults.react","MWMessageSearchStatusTypes","MWPVisibleMessageContext.react","MWV2HeaderContainer.react","MWXCircleButton.react","MWXColumn.react","MWXColumnItem.react","MWXIconArrowLeft","MWXIconArrowRight","MWXRow.react","MWXRowItem.react","MWXText.react","MWXThreadThemeColor","qex","react","react-compiler-runtime","requireDeferred","useClearChatTabMessageSearch","useMWInboxMessageSearchRestoreLoopAndStatus","useMWPConversationSearch","useMWPStartConversationSearch","usePrevious"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.useState,m=c("requireDeferred")("MAWFTSRestoreSync").__setRef("MWChatTabMessageSearchPage.react"),n={root:{height:"x5yr21d",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(56),e=a.onReturn;a=a.thread;var f=a.threadKey,g=a.threadType,i=c("useMWPConversationSearch")(f),p=i.query,q=i.resultCount;i=i.searchResults;var r=l(p!=null?p:""),s=r[0];r=r[1];var t=c("useMWPStartConversationSearch")(f),u=c("useMWInboxMessageSearchRestoreLoopAndStatus")(a),v=u.onEBOnboarded,w=u.status,x=c("useClearChatTabMessageSearch")(f);u=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext();var y=u.setVisibleMessage;f=d("Locale").isRTL()?c("MWXIconArrowRight"):c("MWXIconArrowLeft");b[0]!==a.threadType?(u=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType),b[0]=a.threadType,b[1]=u):u=b[1];a=u;var z=c("usePrevious")(s);b[2]!==x||b[3]!==z||b[4]!==s||b[5]!==w?(u=function(){z!=null&&z!==s&&w.searchStatus!==d("MWMessageSearchStatusTypes").PrimarySearchStatus.NOT_STARTED&&x(z)},b[2]=x,b[3]=z,b[4]=s,b[5]=w,b[6]=u):u=b[6];var A;b[7]!==x||b[8]!==z||b[9]!==s||b[10]!==i||b[11]!==w?(A=[z,s,i,w,x],b[7]=x,b[8]=z,b[9]=s,b[10]=i,b[11]=w,b[12]=A):A=b[12];k(u,A);b[13]!==x||b[14]!==e||b[15]!==s||b[16]!==y?(u=function(){var a;x(s);y(void 0);e();a=(a=c("qex")._("3141"))!=null?a:!1;a||m.onReady(o)},b[13]=x,b[14]=e,b[15]=s,b[16]=y,b[17]=u):u=b[17];A=u;b[18]!==s||b[19]!==t||b[20]!==g?(u=function(){t(s,d("LSMessagingThreadTypeUtil").isArmadilloSecure(g),{clearMessageSearch:!1})},b[18]=s,b[19]=t,b[20]=g,b[21]=u):u=b[21];u=u;var B;b[22]===Symbol["for"]("react.memo_cache_sentinel")?(B=d("MWXThreadThemeColor").mwxThreadThemeColor("var(--mwp-header-button-color)"),b[22]=B):B=b[22];var C;b[23]===Symbol["for"]("react.memo_cache_sentinel")?(C=h._(/*BTDS*/"Back"),b[23]=C):C=b[23];b[24]!==A?(B=j.jsx(c("MWXRowItem.react"),{children:j.jsx(c("MWXCircleButton.react"),{color:B,icon:f,label:C,onPress:A,size:36,type:"deemphasized"})}),b[24]=A,b[25]=B):B=b[25];b[26]===Symbol["for"]("react.memo_cache_sentinel")?(f=j.jsx(c("MWXRowItem.react"),{expanding:!0,verticalAlign:"center",children:j.jsx(c("MWXText.react"),{isSemanticHeading:!0,type:"headlineEmphasized4",children:h._(/*BTDS*/"Search")})}),b[26]=f):f=b[26];b[27]!==B?(C=j.jsx(c("MWXColumnItem.react"),{paddingTop:0,children:j.jsx(c("MWV2HeaderContainer.react"),{startContent:j.jsxs(c("MWXRow.react"),{paddingTop:0,spacingHorizontal:8,children:[B,f]})})}),b[27]=B,b[28]=C):C=b[28];b[29]!==u||b[30]!==e||b[31]!==s||b[32]!==q||b[33]!==w?(A=j.jsx(c("MWXColumnItem.react"),{children:j.jsx(c("MWMessageSearchInput.react"),{onEscape:e,query:s,resultCount:q,search:u,setQuery:r,status:w})}),b[29]=u,b[30]=e,b[31]=s,b[32]=q,b[33]=w,b[34]=A):A=b[34];b[35]!==e||b[36]!==w?(f=j.jsx(c("MWMessageSearchResults.react"),{onSelect:e,status:w}),b[35]=e,b[36]=w,b[37]=f):f=b[37];b[38]!==a||b[39]!==p||b[40]!==s||b[41]!==i||b[42]!==w?(B=j.jsx(c("MWMessageSearchNullState.react"),{isSecureThread:a,query:p,queryInput:s,searchResults:i,status:w}),b[38]=a,b[39]=p,b[40]=s,b[41]=i,b[42]=w,b[43]=B):B=b[43];b[44]!==a||b[45]!==v||b[46]!==w?(r=a&&j.jsx(c("MWMessageSearchEBRestoreStatusOrUpsell.react"),{onEBOnboarded:v,status:w}),b[44]=a,b[45]=v,b[46]=w,b[47]=r):r=b[47];b[48]!==f||b[49]!==B||b[50]!==r?(u=j.jsx(c("MWXColumnItem.react"),{expanding:!0,children:j.jsxs(c("CometScrollView.react"),{showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!0,children:[f,B,r]})}),b[48]=f,b[49]=B,b[50]=r,b[51]=u):u=b[51];b[52]!==C||b[53]!==A||b[54]!==u?(q=j.jsxs(c("MWXColumn.react"),{spacing:0,xstyle:n.root,children:[C,A,u]}),b[52]=C,b[53]=A,b[54]=u,b[55]=q):q=b[55];return q}function o(a){a=a.getFTSRestoreSync;a().setShouldPauseRestore(!0)}g["default"]=a}),226);
__d("MWChatTabWithMessageSearch.react",["BaseMultiStepContainer.react","MWPConversationSearchContext.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(2),e=a.children;b[0]!==e?(a=i.jsx(d("MWPConversationSearchContext.react").MWPConversationSearchContext,{children:i.jsx(c("BaseMultiStepContainer.react"),{disableFocusContainment:!0,disableInitialAutoFocus:!0,expanding:!0,stopOnFocusWithinPropagation:!1,children:function(a){return e(a)}})}),b[0]=e,b[1]=a):a=b[1];return a}g["default"]=a}),98);
__d("MWInboxMessageSearchPanel.react",["CometScrollView.react","LSMessagingThreadTypeUtil","MWInboxMessageSearchContext.react","MWInboxMessageSearchPanelHeader.react","MWMessageSearchEBRestoreStatusOrUpsell.react","MWMessageSearchInput.react","MWMessageSearchNullState.react","MWMessageSearchResults.react","MWMessageSearchStatusTypes","MWXColumn.react","MWXColumnItem.react","gkx","react","react-compiler-runtime","useMWInboxMessageSearchRestoreLoopAndStatus","useMWPClearConversationSearch","useMWPStartConversationSearch","usePrevious","withCometPlaceholder"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState,l={facebookRoot:{height:"xtp0wl1",$$css:!0},facebookRootM5:{height:"x1og2svy",$$css:!0},root:{height:"x19g9ylp",$$css:!0}};function m(a){var b=d("react-compiler-runtime").c(43),e=a.onReturn,f=a.thread;a=d("MWInboxMessageSearchContext.react").useMWInboxMessageSearchContext();var g=a.query,h=a.resultCount;a=a.searchResults;var m=c("useMWPStartConversationSearch")(f.threadKey),n=c("useMWInboxMessageSearchRestoreLoopAndStatus")(f),o=n.onEBOnboarded,p=n.status;b[0]!==g?(n=function(){return g!=null?g:""},b[0]=g,b[1]=n):n=b[1];n=k(n);var q=n[0],r=n[1],s;b[2]!==g||b[3]!==q||b[4]!==p?(n=function(){g!=null&&g!==q&&p.overallSearchStatus===d("MWMessageSearchStatusTypes").OverallStatus.NOT_STARTED&&r(g)},s=[g,q,p],b[2]=g,b[3]=q,b[4]=p,b[5]=n,b[6]=s):(n=b[5],s=b[6]);j(n,s);b[7]!==q||b[8]!==m||b[9]!==f.threadType?(n=function(){m(q,d("LSMessagingThreadTypeUtil").isArmadilloSecure(f.threadType))},b[7]=q,b[8]=m,b[9]=f.threadType,b[10]=n):n=b[10];s=n;b[11]!==f.threadType?(n=d("LSMessagingThreadTypeUtil").isArmadilloSecure(f.threadType),b[11]=f.threadType,b[12]=n):n=b[12];n=n;var t=c("useMWPClearConversationSearch")(),u=c("usePrevious")(q);u!=null&&u!==q&&p.searchStatus!==d("MWMessageSearchStatusTypes").PrimarySearchStatus.NOT_STARTED&&t({shouldClearThreadSearch:!1,shouldResetNavigation:!1});b[13]!==e?(u=i.jsx(c("MWXColumnItem.react"),{paddingTop:0,children:i.jsx(c("MWInboxMessageSearchPanelHeader.react"),{onReturn:e})}),b[13]=e,b[14]=u):u=b[14];b[15]!==s||b[16]!==e||b[17]!==q||b[18]!==h||b[19]!==p?(t=i.jsx(c("MWXColumnItem.react"),{children:i.jsx(c("MWMessageSearchInput.react"),{onEscape:e,query:q,resultCount:h,search:s,setQuery:r,status:p})}),b[15]=s,b[16]=e,b[17]=q,b[18]=h,b[19]=p,b[20]=t):t=b[20];b[21]!==p?(s=i.jsx(c("MWMessageSearchResults.react"),{status:p}),b[21]=p,b[22]=s):s=b[22];b[23]!==n||b[24]!==g||b[25]!==q||b[26]!==a||b[27]!==p?(e=i.jsx(c("MWMessageSearchNullState.react"),{isSecureThread:n,query:g,queryInput:q,searchResults:a,status:p}),b[23]=n,b[24]=g,b[25]=q,b[26]=a,b[27]=p,b[28]=e):e=b[28];b[29]!==n||b[30]!==o||b[31]!==p?(h=n&&i.jsx(c("MWMessageSearchEBRestoreStatusOrUpsell.react"),{onEBOnboarded:o,status:p}),b[29]=n,b[30]=o,b[31]=p,b[32]=h):h=b[32];b[33]!==h?(a=i.jsx(i.Fragment,{children:h}),b[33]=h,b[34]=a):a=b[34];b[35]!==a||b[36]!==s||b[37]!==e?(n=i.jsx(c("MWXColumnItem.react"),{expanding:!0,children:i.jsxs(c("CometScrollView.react"),{showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!0,children:[s,e,a]})}),b[35]=a,b[36]=s,b[37]=e,b[38]=n):n=b[38];b[39]!==n||b[40]!==u||b[41]!==t?(o=i.jsxs(c("MWXColumn.react"),{spacing:0,xstyle:c("gkx")("23433")?l.root:c("gkx")("24031")?l.facebookRootM5:l.facebookRoot,children:[u,t,n]}),b[39]=n,b[40]=u,b[41]=t,b[42]=o):o=b[42];return o}function a(a){var b=d("react-compiler-runtime").c(6),c=a.onReturn;a=a.thread;var e;b[0]!==c||b[1]!==a?(e=i.jsx(m,{onReturn:c,thread:a}),b[0]=c,b[1]=a,b[2]=e):e=b[2];b[3]!==e||b[4]!==a?(c=i.jsx(d("MWInboxMessageSearchContext.react").MWInboxMessageSearchContext,{thread:a,children:e}),b[3]=e,b[4]=a,b[5]=c):c=b[5];return c}e=d("withCometPlaceholder").withCometPlaceholder(a,null,"MWInboxMessageSearchPanelWithContext");g["default"]=e}),98);
__d("MWSearchInConversationMenuItem.react",["fbt","FDSMagnifyingGlassOutline20Icon","MWXMenuItem.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=h._(/*BTDS*/"Search in conversation");function a(a){var b=d("react-compiler-runtime").c(5),e=a.onClick;a=a.threadType;var f;b[0]!==a?(f={eventName:"open_search_in_conversation",threadType:a},b[0]=a,b[1]=f):f=b[1];b[2]!==e||b[3]!==f?(a=j.jsx(c("MWXMenuItem.react"),{icon:c("FDSMagnifyingGlassOutline20Icon"),loggingEvent:f,onClick:e,primaryText:k}),b[2]=e,b[3]=f,b[4]=a):a=b[4];return a}g["default"]=a}),226);
__d("useMAWFTSResetEBAvailabilityOnEBOnboard",["LSMessagingThreadTypeUtil","MAWFTSSyncConsts","MWEBEntrypointsKillswitch.enum","promiseDone","react","react-compiler-runtime","requireDeferred","useMWEBBackupState"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.useEffect,j=b.useRef,k=b.useState,l=c("requireDeferred")("MAWFTSRestoreSync").__setRef("useMAWFTSResetEBAvailabilityOnEBOnboard");function a(a){var b=d("react-compiler-runtime").c(10),e=j(null),f=k(!1),g=f[0],h=f[1];b[0]!==a.threadType?(f=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType),b[0]=a.threadType,b[1]=f):f=b[1];var l=f;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a={entrypoint:c("MWEBEntrypointsKillswitch.enum").NOT_AN_ENTRYPOINT_NO_KILLSWITCH_APPLICABLE},b[2]=a):a=b[2];f=c("useMWEBBackupState")(a);var n=f===3;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(){e.current=window.setTimeout(function(){return h(!0)},d("MAWFTSSyncConsts").THREAD_VIEW_DELAY_UNTIL_RESTORE);return function(){e.current!=null&&(window.clearTimeout(e.current),e.current=null)}},f=[],b[3]=a,b[4]=f):(a=b[3],f=b[4]);i(a,f);var o=m;b[5]!==g||b[6]!==n||b[7]!==l?(a=function(){l&&n&&g&&o()},f=[l,n,o,g],b[5]=g,b[6]=n,b[7]=l,b[8]=a,b[9]=f):(a=b[8],f=b[9]);i(a,f)}function m(){l.onReady(n)}function n(a){a=a.getFTSRestoreSync;a=a();a.resetEBAvailability();a.isStarted()||c("promiseDone")(a.startSyncingLoop())}g["default"]=a}),98);
__d("usePushChatTabMessageSearchPage.react",["MWInboxMessageSearchContext.react","MWPConversationSearchLogger","MWV2TabContainer","deferredLoadComponent","react","react-compiler-runtime","requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||c("react");(h||(h=d("react"))).useCallback;var k=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MWChatTabMessageSearchPage.react").__setRef("usePushChatTabMessageSearchPage.react"));function a(a,b,e){var f=d("react-compiler-runtime").c(4),g;f[0]!==e||f[1]!==b||f[2]!==a?(g=function(){e!=null&&(c("MWPConversationSearchLogger").logMessageSearchStart(a.threadKey,a.threadType),e(function(c){c=c.onReturn;return j.jsx(d("MWInboxMessageSearchContext.react").MWInboxMessageSearchContext,{thread:a,children:j.jsx(d("MWV2TabContainer").MWV2TabContainer,{style:{boxShadow:"none",margin:0},tab:b,threadKey:a.threadKey,children:j.jsx(k,{onReturn:c,thread:a})})})}))},f[0]=e,f[1]=b,f[2]=a,f[3]=g):g=f[3];return g}g["default"]=a}),98);